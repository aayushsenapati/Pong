<!DOCTYPE html>
<html>

<head>
    <title>Join Room</title>
</head>

<body>
    <div id="root"></div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react@17.0.2/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@17.0.2/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/babel-standalone@6.26.0/babel.min.js"></script>
    <script>const socket = io()</script>
    <script type="text/babel">
        function joinRoom(roomId) {
            if (roomId == "") return;
            console.log(roomId);
            socket.emit("joinRoom", roomId);
        }
        function createRoom() {
            socket.emit("createRoom");
        }
        function Join(props) {
            return (
                <div>
                    <label for="room-id">Enter Room ID:</label>
                    <input type="text" id="room-id" name="room-id" />
                    <button onClick={() => props.joinRoom(document.getElementById("room-id").value)}>Join Room</button>
                    <button onClick={() => props.createRoom()}>Create Room</button>
                </div>
            )
        }

        function Game() {
            return (
                <div>
                    <h1>Game</h1>
                </div>
            )
        }

        function App() {
            return (
                <div>
                    <Join joinRoom={joinRoom} createRoom={createRoom} />
                    <Game />
                </div>
            )
        }
        ReactDOM.render(<App />, document.getElementById("root"));
    </script>


    <script>

        socket.on("roomFull", () => {
            console.log("Room is full");
        })
        socket.on("createdRoom", (roomNo) => {
            console.log(roomNo);
            document.getElementById("room-id").value = roomNo;
        })
        socket.on("roomNotFound", () => {
            console.log("Room not found");
        })
        socket.on("joinedRoom", (roomId) => {
            console.log("Joined Room ", roomId);
        })
        socket.on("userJoined", (socketId) => {
            console.log("User joined ", socketId);
        })
    </script>
</body>

</html>